

<app-mobile-header-with-back-button  [zIndex]="100003" (onBackPressed)="backToPreviousStep()" *ngIf="activeStep !== -1 && business.id" [heading]="heading" [urlAction]="false"></app-mobile-header-with-back-button>



<div class="w-100 px-3 px-md-1 pt-4" id="business-mobile-form">

  <app-my-stepper *ngIf="!business || !business.id" class=" mt-5 mb-5" [steps]="steps" [activeStep]="activeStep"></app-my-stepper>

  <div class="col-md-12 p-0  pb-3" *ngIf="activeStep === -1">


      <div class="w-100 d-flex justify-content-center align-items-center">
        <img src="{{business.logo}}" style="width: 100px;height: 100px;border-radius: 100%" >
      </div>



    <div class="w-100 py-3">



      <ng-container *ngFor="let accordian of accordians">
        <ng-container *ngIf="accordian.visible">
          <div matRipple (click)="goStep(accordian.step)" class="my-accordion w-100 px-2 py-2 d-flex justify-content-between align-items-center">
            <span>{{accordian.name | translate}}</span>
            <span class="material-symbols-outlined">
arrow_forward_ios
</span>
          </div>
          <mat-divider></mat-divider>
        </ng-container>

      </ng-container>
    </div>

  </div>


  <form [formGroup]="formGeneralInfo" *ngIf="activeStep === 0" class="col-12  mt-4" >

    <h4 class="mb-0 ">{{'General Information' | translate}}</h4>

    <div class="w-100">

      <div class="w-100 d-flex" >

        <div [ngClass]="{'w-100' : !selectedCountry || !selectedCountry.cities || !selectedCountry.cities.length , 'w-50 pe-1' : selectedCountry && selectedCountry.cities && selectedCountry.cities.length}">

          <mat-form-field appearance="outline" >
<!--            <mat-error>Please select a business</mat-error>-->
            <mat-label>{{'Select Country' | translate}}</mat-label>

            <input formControlName="country" type="text"
            placeholder="{{'Select' | translate}}"
            matInput
            [matAutocomplete]="auto">
            <mat-autocomplete #auto="matAutocomplete" (optionSelected)="selectCountry($event.option.value)">
              <mat-option *ngFor="let country of countries" [value]="country">
                {{country.country_name}}
              </mat-option>
            </mat-autocomplete>

<!--            <mat-select formControlName="country" (selectionChange)="selectCountry($event.value)" >-->
<!--&lt;!&ndash;              <mat-select-trigger>&ndash;&gt;-->

<!--&lt;!&ndash;                    <span *ngIf="formPromotionInfo.controls.business.value">&ndash;&gt;-->
<!--&lt;!&ndash;                     <i class="fa fa-check-circle text-success"></i>&nbsp;{{formPromotionInfo.controls.business.value.business_name_prefix}} {{formPromotionInfo.controls.business.value.business_name}}&ndash;&gt;-->
<!--&lt;!&ndash;                    </span>&ndash;&gt;-->


<!--&lt;!&ndash;              </mat-select-trigger>&ndash;&gt;-->

<!--              <mat-option>-->
<!--                <ngx-mat-select-search formControlName="search_business"-->
<!--                                       placeholderLabel="Search ..."-->
<!--                                       noEntriesFoundLabel="'no match found'"></ngx-mat-select-search>-->
<!--              </mat-option>-->

<!--              <mat-option *ngFor="let country of countries" [value]="country">-->
<!--                {{country.country_name}}-->
<!--              </mat-option>-->
<!--            </mat-select>-->
          </mat-form-field>


<!--          <mat-form-field appearance="outline">-->
<!--            <mat-label>{{'Select Country' | translate}}</mat-label>-->


<!--            <input formControlName="country"  type="text"-->
<!--                   placeholder="{{'Select' | translate}}"-->
<!--                   matInput-->
<!--                   [matAutocomplete]="auto">-->
<!--            <mat-autocomplete #auto="matAutocomplete" (optionSelected)="selectCountry($event.option.value)">-->
<!--              <mat-option *ngFor="let country of countries" [value]="country">-->
<!--                {{country.country_name}}-->
<!--              </mat-option>-->
<!--            </mat-autocomplete>-->
<!--          </mat-form-field>-->

        </div>

        <div class="w-50 ps-1" *ngIf="selectedCountry && selectedCountry.cities && selectedCountry.cities.length" >


          <mat-form-field appearance="outline">
            <mat-label>{{'City' | translate}}</mat-label>

              <input formControlName="city"  type="text"
                     placeholder="{{'Select' | translate}}"
                     matInput
                     [matAutocomplete]="auto">
              <mat-autocomplete #auto="matAutocomplete" >

                <mat-option *ngFor="let city of selectedCountry.cities" [value]="city.city">
                  {{city.city}}
                </mat-option>
              </mat-autocomplete>

          </mat-form-field>


        </div>

      </div>
      <div class="row">

        <mat-label>{{'Business Type'  | translate}}</mat-label>


        <div class="col-md-12 mt-2 mb-2">
          <mat-error *ngIf="formGeneralInfo.controls.business_type.touched && formGeneralInfo.controls.business_type.invalid">{{'What is your business type' | translate}}</mat-error>


          <mat-radio-group  aria-label="Select an option" formControlName="business_type">
            <mat-radio-button value="Company">{{'Company' | translate}}  &nbsp;&nbsp;</mat-radio-button>
            <mat-radio-button value="Independent Professional">{{'Independent Professional' | translate}}</mat-radio-button>

          </mat-radio-group>

        </div>


      </div>

      <div class="row">


        <div class="col-md-3" *ngIf="formGeneralInfo.controls.business_type.value && formGeneralInfo.controls.business_type.value === 'Independent Professional'">

          <mat-form-field  appearance="outline">
            <mat-label>{{'Business Name Prefix' | translate}}</mat-label>
            <input [required]="formGeneralInfo.controls.business_type.value === 'Independent Professional'" matInput formControlName="business_name_prefix" name="business_name_prefix" placeholder="DR" >
          </mat-form-field>

        </div>
        <div [ngClass]="formGeneralInfo.controls.business_type.value === 'Independent Professional' ? 'col-md-9' : 'col-md-12'" >

          <mat-form-field  appearance="outline">
            <mat-label>{{'Business Title' | translate}}</mat-label>

            <input matInput formControlName="business_name" name="business_name" placeholder="Ejemplo: Pizza's Ninos / Dr. Hector Armijo" >
          </mat-form-field>

        </div>

      </div>


      <div class="row">



        <div class="col-md-12">

          <mat-form-field  appearance="outline">
            <mat-label>{{'Business Slogan' | translate}}</mat-label>
            <input matInput formControlName="slogan" name="slogan" placeholder="Ejemplo: Tradicion y sabor Italiano" >
          </mat-form-field>

        </div>

      </div>

      <div class="row">



        <div class="col-md-12">

          <mat-form-field  appearance="outline">
            <mat-label>{{'Full Address (Geolocation)' | translate}}</mat-label>
              <input matInput formControlName="address" name="address" placeholder="Enter address" >

              <!--            <input ngx-google-places-autocomplete  #placesRef="ngx-places" (onAddressChange)="handleAddressChange($event)" matInput formControlName="address" name="address" placeholder="{{'Start typing and find your place in google map' | translate}}" >-->
          </mat-form-field>

        </div>

      </div>



    </div>


  </form>

  <form [formGroup]="formDetails" *ngIf="activeStep === 1" class="col-12">

      <mat-form-field appearance="outline">
        <mat-label>{{"Business Summary" | translate}}</mat-label>
        <!--        <mat-error-->
        <!--                *ngIf="formPromotionInfo.controls.description.touched && formPromotionInfo.controls.description.invalid ">-->
        <!--          Description is required-->
        <!--        </mat-error>-->
<!--        cdkTextareaAutosize-->
<!--        #autosizeSummary="cdkTextareaAutosize"-->
<!--        cdkAutosizeMinRows="5"-->
<!--        cdkAutosizeMaxRows="5"-->

        <textarea
                rows="5"
                formControlName="summary"
                matInput
             ></textarea>


      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>{{"Business Details" | translate}}</mat-label>
        <!--        <mat-error-->
        <!--                *ngIf="formPromotionInfo.controls.about.touched && formPromotionInfo.controls.about.invalid ">-->
        <!--          About is required-->
        <!--        </mat-error>-->

<!--        cdkTextareaAutosize-->
<!--        #autosizeDescription="cdkTextareaAutosize"-->
<!--        cdkAutosizeMinRows="5"-->
<!--        cdkAutosizeMaxRows="5"-->
        <textarea
                rows="5"
                formControlName="description"
                matInput


        ></textarea>


      </mat-form-field>


    <mat-form-field class="example-chip-list" appearance="outline">

      <mat-label>{{'Tags or Keywords(separated by comma )' | translate}}</mat-label>

      <mat-chip-list #tagList>
        <mat-chip *ngFor="let tag of tags" [selectable]="selectable"
                  [removable]="removable" (removed)="removeTag(tag)">
          {{tag}}
          <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
        </mat-chip>
        <input placeholder="{{'Enter tags' | translate}} ."
               [matChipInputFor]="tagList"
               [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
               [matChipInputAddOnBlur]="addOnBlur"
               (matChipInputTokenEnd)="addTags($event)">
      </mat-chip-list>
    </mat-form-field>




  </form>

  <form [formGroup]="formCategoryInfo" *ngIf="activeStep === 2" class="col-12">
    <app-category-selector  [selectedCategories]="selectedCategories" (onSelectedCategoriesChange)="selectedCategories = $event"></app-category-selector>
  </form>

  <form [formGroup]="formContactInfo" *ngIf="activeStep === 10" class="col-12">
    <mat-form-field  appearance="outline">
      <mat-label>{{'Contact Email' | translate}}</mat-label>
      <input  matInput formControlName="contact_email"  placeholder="" >
    </mat-form-field>
    <mat-form-field  appearance="outline">
      <mat-label>{{'Business Email' | translate}}</mat-label>
      <input  matInput formControlName="business_email"  placeholder="" >
    </mat-form-field>
    <mat-form-field  appearance="outline">
      <mat-label>{{'Business Phone' | translate}}</mat-label>
      <input  matInput formControlName="business_phone"  placeholder="" >
    </mat-form-field>
    <mat-form-field  appearance="outline">
      <mat-label>{{'Cell Phone' | translate}}</mat-label>
      <input  matInput formControlName="cell_phone"  placeholder="" >
    </mat-form-field>

  </form>

  <form [formGroup]="formPriceInfo" *ngIf="activeStep === 8" class="col-12">

    <mat-form-field class="example-full-width" appearance="outline">
      <mat-label>{{'Price Range' | translate}}</mat-label>

      <input formControlName="price_level" name="price_level" type="text"
             placeholder="{{'Price Range' | translate}}"
             matInput
             [matAutocomplete]="auto">
      <mat-autocomplete #auto="matAutocomplete">
        <mat-option *ngFor="let option of options" [value]="option">
          {{option}}
        </mat-option>
      </mat-autocomplete>
    </mat-form-field>


    <mat-form-field appearance="outline">
      <mat-label>{{'Price From' | translate}} <span *ngIf="selectedCountry">({{selectedCountry.currency}})</span>
      </mat-label>
      <input formControlName="price_from" name="price_from" type="number"
             placeholder="{{'Price From' | translate}}"
             matInput
      >
    </mat-form-field>


    <mat-form-field appearance="outline">

      <mat-label>{{'Price To' | translate}} <span *ngIf="selectedCountry">({{selectedCountry.currency}})</span>
      </mat-label>

      <input formControlName="price_to" name="price_to" type="number"
             placeholder="{{'Price To' | translate}}"
             matInput>
    </mat-form-field>


  </form>

  <div *ngIf="activeStep === 6" class="col-12">


    <section class="wh-hours p-0 w-100" *ngIf="working_hours" style="min-height: 90vh !important;">
      <ng-container  *ngFor="let hour of working_hours">
        <div class="col-md-12 py-2 d-flex justify-content-between align-items-center">

          <span>{{hour.day.toUpperCase()}}</span>

          <span>
            <ng-container >
            {{hour.starts_at}} to {{hour.ends_at}}
            </ng-container>
<!--            <ng-container *ngIf="hour.open_24_h>-->
<!--              {{"Open 24 hours" | translate}}-->
<!--            </ng-container>-->

          </span>

          <div class="d-flex align-items-center gap-2">
          <span class="material-symbols-outlined cursor-pointer">
edit
</span>
            <span class="material-symbols-outlined cursor-pointer">
delete
</span>
          </div>


        </div>
        <mat-divider></mat-divider>
      </ng-container>

    </section>


    <div class="w-100 d-flex align-items-center justify-content-end gap-3" style="position: fixed; bottom: 20px;right: 20px;">

      <div (click)="goStep(14)" class="bg-black shadow d-flex justify-content-center align-items-center"
           style="width: 40px;height: 40px;border-radius: 50%;">
        <span class="material-symbols-outlined text-white">
add
</span>
      </div>
    </div>

  </div>

  <form [formGroup]="formServiceInfo" *ngIf="activeStep === 12" class="w-100">
    <div class="col-md-12">
      <div *ngIf="formServiceInfo.controls.service_name.touched && formServiceInfo.controls.service_name.errors">

        <mat-error *ngIf="formServiceInfo.controls.service_name.errors.required">
          {{'What is the service name ?' | translate}}
        </mat-error>
        <mat-error *ngIf="formServiceInfo.controls.service_name.errors.maxLength !== null">
          {{'Service name should not exceed 80 characters' | translate}}
        </mat-error>



      </div>
      <mat-form-field  appearance="outline">

        <mat-label>{{'Service name' | translate}}</mat-label>
        <input matInput type="text" formControlName="service_name" placeholder="{{'Service name' | translate}}" >
      </mat-form-field>

    </div>
    <div class="col-md-12">

      <mat-form-field  appearance="outline">
        <mat-label>{{'Service Price' | translate}}</mat-label>
        <input [min]="0" matInput type="number" formControlName="price" placeholder="{{'Service Price' | translate}}" >
      </mat-form-field>

    </div>
    <div class="col-md-12">

      <div *ngIf="formServiceInfo.controls.service_description.touched && formServiceInfo.controls.service_description.errors && formServiceInfo.controls.service_description.errors !== null">

        <mat-error *ngIf="formServiceInfo.controls.service_description.errors.required">
          {{'Please write about the service' | translate}}
        </mat-error>
        <mat-error *ngIf="formServiceInfo.controls.service_description.errors.minLength !== null">
          {{'Service description should contain at least 20 characters' | translate}}
        </mat-error>
        <mat-error *ngIf="formServiceInfo.controls.service_description.errors.maxLength !== null">
          {{'Service description should not exceed 2500 characters' | translate}}
        </mat-error>


      </div>



      <mat-form-field class="example-full-width" appearance="outline">
        <mat-label>{{'Service Description' | translate}}</mat-label>
        <textarea formControlName="service_description" matInput placeholder="{{'Write about the service' | translate}} ..."></textarea>
      </mat-form-field>
    </div>
    <div class="col-md-12 mt-2">

      <mat-slide-toggle formControlName="booking_enabled">{{'Enable / Disable booking' | translate}}</mat-slide-toggle>

    </div>

  </form>

  <div *ngIf="activeStep === 9" class="col-12">


    <section class="faqs p-0 w-100" *ngIf="faqs" style="min-height: 90vh !important;">
      <ng-container  *ngFor="let faq of faqs">
        <div class="col-md-12 py-2 d-flex justify-content-between align-items-center">

          <span>{{faq.question}}</span>


          <div class="d-flex align-items-center gap-2">
          <span class="material-symbols-outlined cursor-pointer">
edit
</span>
            <span class="material-symbols-outlined cursor-pointer">
delete
</span>
          </div>


        </div>
        <mat-divider></mat-divider>
      </ng-container>

    </section>


    <div class="w-100 d-flex align-items-center justify-content-end gap-3" style="position: fixed; bottom: 20px;right: 20px;">

      <div (click)="goStep(13)" class="bg-black shadow d-flex justify-content-center align-items-center"
           style="width: 40px;height: 40px;border-radius: 50%;">
        <span class="material-symbols-outlined text-white">
add
</span>
      </div>
    </div>

  </div>


  <div *ngIf="activeStep === 5" class="col-12">


    <section class="services p-0 w-100" *ngIf="services" style="min-height: 90vh !important;">
      <ng-container  *ngFor="let service of services">
        <div class="col-md-12 py-2 d-flex justify-content-between align-items-center">

          <span>{{service.service_name}}</span>

          <div class="d-flex align-items-center gap-2">
          <span class="material-symbols-outlined cursor-pointer">
edit
</span>
            <span class="material-symbols-outlined cursor-pointer">
delete
</span>
          </div>


        </div>
        <mat-divider></mat-divider>
      </ng-container>

    </section>


    <div class="w-100 d-flex align-items-center justify-content-end gap-3" style="position: fixed; bottom: 20px;right: 20px;">

      <div (click)="goStep(12)" class="bg-black shadow d-flex justify-content-center align-items-center"
           style="width: 40px;height: 40px;border-radius: 50%;">
        <span class="material-symbols-outlined text-white">
add
</span>
      </div>
    </div>

  </div>


  <form [formGroup]="formFAQ"  class="col-12" *ngIf="activeStep === 13">

    <div class="col-md-12">

      <mat-form-field class="" appearance="outline">
        <mat-label>{{"Question" | translate}}</mat-label>
        <input type="text" formControlName="question"
               placeholder=""
               matInput
        >
      </mat-form-field>

    </div>
    <div class="col-md-12">

      <mat-form-field class="" appearance="outline">
        <mat-label>{{"Answer" | translate}}</mat-label>
                    <textarea formControlName="answer"

                              placeholder="Answer"
                              matInput
                    ></textarea>
      </mat-form-field>

    </div>

  </form>

  <div class="col-12" *ngIf="activeStep === 7">
    <div class="alert alert-dark">
      {{"No data available for this moment, we will notify you as soon as features available for the selected categories" | translate}}
    </div>
  </div>


  <form class="col-12" [formGroup]="formWorkingHourInfo" *ngIf="activeStep === 14">
    <div class="col-md-12">

      <mat-form-field class="example-full-width" appearance="outline">
        <mat-label>{{'Select Business Day' | translate}}</mat-label>
        <input formControlName="working_hour_day"
               placeholder="{{'Select Business Day' | translate}}"
               matInput
               [matAutocomplete]="auto">
        <mat-autocomplete #auto="matAutocomplete">
          <mat-option *ngFor="let day of days" [value]="day.day">
             {{day.day}}
          </mat-option>
        </mat-autocomplete>
      </mat-form-field>


    </div>
    <div class="col-md-12">
      <mat-form-field  appearance="outline">
        <mat-label>{{"Start time" | translate}}</mat-label>
        <input formControlName="working_hour_starts_at" type="time"
               placeholder="09:00 AM"
               matInput
        >
      </mat-form-field>

    </div>
    <div class="col-md-12">
      <mat-form-field  appearance="outline">
        <mat-label>{{"End time" | translate}}</mat-label>
        <input  formControlName="working_hour_ends_at" type="time"
                placeholder="09:00 AM"
                matInput
        >
      </mat-form-field>

    </div>
    <div class="col-md-12">

      <mat-checkbox formControlName="working_hour_open_24_h" value="1">{{"Available 24 Hours" | translate}}</mat-checkbox>

    </div>
  </form>

  <form class="col-12"  *ngIf="activeStep === 11">
    <div class="col-md-12" *ngFor="let socialMedia of socialMedias">


      <mat-form-field class="example-full-width" appearance="outline">
        <mat-label>{{ socialMedia.name.toUpperCase() | translate}}</mat-label>
        <input [(ngModel)]="socialMedia.link" name="link" [ngModelOptions]="{standalone: true}"
               placeholder="{{'Enter Link' | translate}}"
               matInput
              />
      </mat-form-field>
    </div>
  </form>

  <div class="w-100" *ngIf="activeStep === 3">
    <div class="row" *ngIf="logo">

      <div class="w-100 gap-2 d-flex flex-column justify-content-center align-items-center">
        <mat-label>{{"Current Logo" | translate}}</mat-label>
        <div class="col-4 mb-4" >

          <img src="{{logo}}" class="img-fluid rounded-5" >
        </div>
      </div>


    </div>
    <div class="row mt-3">

      <mat-label class="mb-2">Upload Business Logo</mat-label>
      <div class="col-md-12">
        <ngx-dropzone [multiple]="false"   (change)="onSelectLogo($event , 'logo')">
          <ngx-dropzone-label>Drop your logo here or click to upload</ngx-dropzone-label>
          <ngx-dropzone-image-preview  [file]="f"  *ngFor="let f of logoFiles" [removable]="true" (removed)="onRemove(f , 'logo')">
            <ngx-dropzone-label>{{ f.name }} ({{ f.type }})</ngx-dropzone-label>
          </ngx-dropzone-image-preview>
        </ngx-dropzone>

      </div>



    </div>
    <div class="row my-3" *ngIf="fileProgress === true">
      <div class="col-12">
        <p class="text-primary text-center">Logo uploading on progress ...</p>
        <mat-divider></mat-divider>
        <mat-progress-bar mode="indeterminate"></mat-progress-bar>

      </div>

    </div>

  </div>

  <div class="w-100" *ngIf="activeStep === 4">
    <div class="col-12">
      <div class="row px-1" *ngIf="images.length > 0">

        <mat-label class="mb-2">Saved Images</mat-label>
        <div class="col-4 mb-4 text-center" *ngFor="let img of images" style="padding: 4px !important;">

          <div style="width: 100%;height: 100px;background: url('{{img}}');background-position: center center; background-size:cover;border-radius:10px;margin-bottom:15px;">

          </div>

          <div class="d-flex w-100 justify-content-center align-items-center">
            <span class="material-symbols-outlined cursor-pointer" (click)="deleteImage(img)">
delete
</span>
          </div>


        </div>

      </div>

    </div>
    <div class="row">

      <mat-label class="mb-2">Upload Images</mat-label>
      <div class="col-md-12">
        <ngx-dropzone (change)="onSelect($event , 'images')">
          <ngx-dropzone-label>Drop files here or click to upload</ngx-dropzone-label>

          <ngx-dropzone-image-preview  [file]="f" *ngFor="let f of files" [removable]="true" (removed)="onRemove(f , 'images')">
            <ngx-dropzone-label>{{ f.name }} ({{ f.type }})</ngx-dropzone-label>
          </ngx-dropzone-image-preview>


        </ngx-dropzone>

      </div>

    </div>

    <div class="col-12 my-3" *ngIf="fileProgress === true">
      <p class="text-primary text-center">Images uploading on progress ...</p>
      <mat-divider></mat-divider>
      <mat-progress-bar mode="indeterminate"></mat-progress-bar>
    </div>

  </div>


  <div class="col-12 d-flex mt-4" *ngIf="activeStep !== -1 && activeStep !== 5 && activeStep !== 6 && activeStep !== 9 && activeStep !== 7 && !fileProgress">

    <ng-container *ngIf="!business || !business.id">
      <div *ngIf="activeStep > 0" class="w-50 pe-1">
        <button type="button" (click)="stepPrev()" class="btn btn-theme-dark btn-block">
          {{"BACK"}}
        </button>
      </div>
      <div [ngClass]="{'w-100' : activeStep < 1 , 'w-50 ps-1' : activeStep > 0}">
        <button type="button" (click)="stepForward()" class="btn btn-theme-dark btn-block">
          <ng-container *ngIf="activeStep < steps.length"> {{"NEXT"}} </ng-container>
          <ng-container *ngIf="activeStep >= steps.length"> {{"SUBMIT"}} </ng-container>
        </button>
      </div>
    </ng-container>

    <ng-container *ngIf="business && business.id">
      <div *ngIf="activeStep !== -1" class="w-100">
        <button (click)="save()" type="button"  class="btn btn-theme-dark btn-block">
          {{"Save"}}
        </button>
      </div>
    </ng-container>

  </div>

  <app-progress-bar *ngIf="saveBusinessProgress"></app-progress-bar>

</div>

<div class="w-100 d-none">

<form [formGroup]="formGeneralInfo" (submit)="nextStep(formGeneralInfo)" *ngIf="currentStep === 1" class="col-12" >

  <mat-card class="" >

    <mat-card-header>

      <mat-card-title>{{'General Business Data' | translate}}</mat-card-title>

    </mat-card-header>
    <mat-divider></mat-divider>
    <mat-card-content>

      <div class="row" >

          <div class="col-md-3">

            <mat-label>{{'Country' | translate}}</mat-label>

            <mat-form-field appearance="outline">

              <input formControlName="country"  type="text"
                     placeholder="{{'Select' | translate}}"
                     matInput
                     [matAutocomplete]="auto">
              <mat-autocomplete #auto="matAutocomplete" (optionSelected)="selectCountry($event.option.value)">
                <mat-option *ngFor="let country of countries" [value]="country">
                  {{country.country_name}}
                </mat-option>
              </mat-autocomplete>
            </mat-form-field>

          </div>

          <div class="col-md-9" *ngIf="selectedCountry" >

            <mat-label>{{'City' | translate}}</mat-label>

            <mat-form-field appearance="outline">

              <input formControlName="city"  type="text"
                     placeholder="{{'Select' | translate}}"
                     matInput
                     [matAutocomplete]="auto">
              <mat-autocomplete #auto="matAutocomplete" >
                <mat-option *ngFor="let city of selectedCountry.cities" [value]="city.city">
                  {{city.city}}
                </mat-option>
              </mat-autocomplete>
            </mat-form-field>


          </div>

      </div>
      <div class="row">

        <mat-label>{{'Business Type'  | translate}}</mat-label>


        <div class="col-md-12 mt-2 mb-2">
          <mat-error *ngIf="formGeneralInfo.controls.business_type.touched && formGeneralInfo.controls.business_type.invalid">{{'What is your business type' | translate}}</mat-error>


          <mat-radio-group  aria-label="Select an option" formControlName="business_type">
            <mat-radio-button value="Company">{{'Company' | translate}}  &nbsp;&nbsp;</mat-radio-button>
            <mat-radio-button value="Independent Professional">{{'Independent Professional' | translate}}</mat-radio-button>

          </mat-radio-group>

        </div>


      </div>

      <div class="row">

        <mat-label>{{'Business Name' | translate}}</mat-label>

        <div class="col-md-3">

          <mat-form-field  appearance="outline">
            <input [required]="formGeneralInfo.controls.business_type.value === 'Independent Professional'" matInput formControlName="business_name_prefix" name="business_name_prefix" placeholder="DR" >
          </mat-form-field>

        </div>
        <div class="col-md-9">

          <mat-form-field  appearance="outline">
            <input matInput formControlName="business_name" name="business_name" placeholder="Ejemplo: Pizza's Ninos / Dr. Hector Armijo" >
          </mat-form-field>

        </div>

      </div>


      <div class="row">

        <mat-label>{{'Business Slogan' | translate}}</mat-label>


        <div class="col-md-12">

          <mat-form-field  appearance="outline">
            <input matInput formControlName="slogan" name="slogan" placeholder="Ejemplo: Tradicion y sabor Italiano" >
          </mat-form-field>

        </div>

      </div>

      <div class="row">

        <mat-label>{{'Full Address(Geolocation)' | translate}}</mat-label>


        <div class="col-md-12">

          <mat-form-field  appearance="outline">
            <input ngx-google-places-autocomplete  #placesRef="ngx-places" (onAddressChange)="handleAddressChange($event)" matInput formControlName="address" name="address" placeholder="{{'Start typing and find your place in google map' | translate}}" >
          </mat-form-field>

        </div>

      </div>

      <div class="row">

        <mat-label>{{'Business Description' | translate}}</mat-label>
        <mat-error *ngIf="formGeneralInfo.controls.summary.touched && !formGeneralInfo.controls.summary.value">
          {{'Description is required' | translate}}
        </mat-error>

        <div class="col-md-12">

          <ckeditor  formControlName="summary" name="summary" [editor]="Editor"  data=""></ckeditor>

        </div>

      </div>

      <div class="row mt-2 mb-2">

        <mat-label class="fw-bold">{{'MORE INFO' | translate}}</mat-label>

        <mat-label class="">{{'Description' | translate}}</mat-label>

        <mat-error *ngIf="formGeneralInfo.controls.description.touched && !formGeneralInfo.controls.description.value">
          {{'Please write about your business' | translate}}
        </mat-error>
        <div class="col-md-12">

          <ckeditor  formControlName="description" name="description" [editor]="Editor"  data=""></ckeditor>



        </div>

        <mat-label>{{'Tags or Keywords(separated by comma )' | translate}}</mat-label>

        <mat-form-field class="example-chip-list" appearance="outline">
          <mat-chip-list #tagList>
            <mat-chip *ngFor="let tag of tags" [selectable]="selectable"
                      [removable]="removable" (removed)="removeTag(tag)">
              {{tag}}
              <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
            </mat-chip>
            <input placeholder="{{'Enter tags' | translate}} ."
                   [matChipInputFor]="tagList"
                   [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                   [matChipInputAddOnBlur]="addOnBlur"
                   (matChipInputTokenEnd)="addTags($event)">
          </mat-chip-list>
        </mat-form-field>


      </div>


      <div class="row">

        <mat-label>{{'Website' | translate}}</mat-label>


        <div class="col-md-12">

          <mat-form-field  appearance="outline">
            <input matInput formControlName="website" name="website" placeholder="http://www.ejemplo.com" >
          </mat-form-field>

        </div>

      </div>

      <div class="row">

        <mat-label>{{'Contacts' | translate}}</mat-label>


        <div class="col-md-6">

          <mat-form-field  appearance="outline">
            <input matInput formControlName="business_phone" name="business_phone" placeholder="{{'Business phone' | translate}}" >
          </mat-form-field>

        </div>
        <div class="col-md-6">

          <mat-form-field  appearance="outline">
            <input matInput formControlName="cell_phone" name="cell_phone" placeholder="{{'Cell phone' | translate}}" >
          </mat-form-field>

        </div>
        <div class="col-md-12">

          <mat-form-field  appearance="outline">
            <input matInput formControlName="business_email" name="business_email" placeholder="{{'Business email' | translate}}" >
          </mat-form-field>

        </div>
        <!-- <div class="col-md-6">

          <mat-form-field  appearance="outline">
            <input matInput placeholder="+504 99999999" >
          </mat-form-field>

        </div> -->

      </div>




    </mat-card-content>
    <mat-divider></mat-divider>
    <mat-card-actions class="text-center">

      <div class="row">

        <div class="col-md-6">

        </div>
        <div class="col-md-6">
          <button  class="next-btn" mat-raised-button color="primary">
            {{'Next' | translate}}
          </button>
        </div>

      </div>




    </mat-card-actions>


  </mat-card>

</form>


<form [formGroup]="formCategoryInfo" (submit)="nextStep(formCategoryInfo)" *ngIf="currentStep === 2" class="col-12 " >

  <mat-card>

    <mat-card-header>

      <mat-card-title>{{'Categories to which you belong' | translate}}</mat-card-title>

    </mat-card-header>
    <mat-divider></mat-divider>
    <mat-card-content>

      <div class="row">

        <h4 class="mt-0">{{'Select Business Category' | translate}}</h4>
        <ol class="breadcrumb mb-2">
          <li class="breadcrumb-item">{{'Categories' | translate}}</li>

          <li (click)="subCats('')" class="breadcrumb-item active">
            <a  class="active">{{'All Categories' | translate}}</a></li>

          <li (click)="subCats(cat.parent.id)" *ngIf="cat !== undefined && cat !== null && cat.parent !== undefined && cat.parent !== null" class="breadcrumb-item active">
            <a  class="active">{{cat.parent.name | translate}}</a></li>

          <li (click)="subCats(cat.id)" *ngIf="cat !== undefined && cat !== null && cat.id !== undefined" class="breadcrumb-item active">
            <a class="active">{{cat.name | translate}}</a></li>


        </ol>

        <div class="row" >

          <div class="col-md-6">
            <mat-form-field  appearance="outline">
              <mat-label>{{'Search Category' | translate}}</mat-label>
              <input matInput  formControlName="main_search" type="text" placeholder="{{'Search by name' | translate}} .."  >
            </mat-form-field>
          </div>
          <div class="col-md-6">
            <button (click)="getCats()" type="button" class="btn btn-primary" style="height: 50px;">
              <i class="fa fa-search"></i>&nbsp;{{'Search' | translate}}
            </button>

          </div>


        </div>

        <div class="row">

          <div class="col-md-12" *ngIf="cat_progress === true">
            <mat-progress-bar mode="indeterminate"></mat-progress-bar>
          </div>


          <div class="col-md-3 mb-4"  *ngFor="let cat of categories">

            <div class="card shadow-lg">

              <div class="card-body p-1  text-center">

                <img src="{{cat.icon}}" width="70"> <br/>

                <h3>
                  {{cat.name | translate}} </h3>

              </div>

              <div class="card-footer text-center">
                <div *ngIf="isSelected(cat) && cat.sub_count === 0" class="col-12 text-center text-primary d-flex font-weight-bold">
                  <i class="fa fa-check"></i>&nbsp;{{'Selected' | translate}}
                  <i class="fa fa-trash text-danger ml-1" (click)="selectCategory(cat)" style="cursor: pointer;" *ngIf="cat.sub_count === 0"></i>
                </div>
                 <button *ngIf="cat.sub_count > 0" type="button" (click)="subCats(cat.id)" class="btn btn-success btn-sm ">
                    <i class="fa fa-angle-right"></i>&nbsp; {{'Sub' | translate}} ({{cat.sub_count}})
                 </button>&nbsp;

                <button *ngIf=" !isSelected(cat)" type="button" (click)="selectCategory(cat)" class="btn btn-success btn-sm ">
                 <i class="fa fa-check"></i>&nbsp; {{'Select' | translate}}
                </button>&nbsp;

              </div>
            </div>


          </div>


        </div>

        <div class="row">

          <div class="col-md-12 mt-2">

            <p>{{'Selected Categories' | translate}}</p>

            <mat-chip class="m-1" *ngFor="let cat of selectedCategories">
              {{cat.name | translate}} <i class="fa fa-times-circle text-white ml-1" (click)="selectCategory(cat)"></i>
            </mat-chip>

          </div>

        </div>


      </div>


    </mat-card-content>
    <mat-divider></mat-divider>
    <mat-card-actions class="text-center">

      <div class="row">

        <div class="col-md-6">
          <button (click)="stepBack()" class="back-btn" mat-button color="primary">
            {{'Back' | translate}}
          </button>
        </div>
        <div class="col-md-6" >
          <button  class="next-btn" mat-raised-button color="primary">
            {{'Next' | translate}}
          </button>
        </div>

      </div>




    </mat-card-actions>


  </mat-card>

</form>
<div *ngIf="currentStep === 3" class="col-12 " >

  <mat-card>

    <mat-card-header>

      <mat-card-title>{{'Features / Custom attributes' | translate}}</mat-card-title>

    </mat-card-header>
    <mat-divider></mat-divider>
    <mat-card-content >



      <div class="row">

        <div class="col-md-12">
          <div class="alert alert-success">
            {{'Here are some suggestions for the categories you have selected, please check the boxes and fill values to save them for your business listing' | translate}}
          </div>

        </div>

        <div class="row" *ngFor="let cat of selectedCategories">
          <div class="col-md-4" *ngFor="let attr of cat.custom_attributes">

             <div class="row">
                <div class="col-md-12">
                  <mat-checkbox (change)="setCustomAttribute(attr)"> <span>{{attr.name}} </span></mat-checkbox>
                </div>

                <div class="col-md-12 mb-1" *ngIf="attr.input_type === 'numeric'">
                  <mat-form-field  appearance="outline">
                    <mat-label>{{attr.name}}</mat-label>
                    <input (change)="setCustomAttribute(attr)" matInput [(ngModel)]="attr.val"  [placeholder]="attr.name" >
                  </mat-form-field>
                </div>
             </div>
          </div>




        </div>

        <div class="row">

          <div class="col-md-12 mt-2">

            <p>{{'Added features / custom attributes' | translate}}</p>

            <mat-chip class="m-1" *ngFor="let attr of business.custom_attributes">
              {{attr.name}} <span *ngIf="attr.val">&nbsp; ({{attr.val}})</span> &nbsp; <i class="fa fa-times-circle text-white" (click)="removeAttr(attr)"></i>
            </mat-chip>

          </div>

        </div>

      </div>


    </mat-card-content>
    <mat-divider></mat-divider>
    <mat-card-actions class="text-center">

      <div class="row">

        <div class="col-md-6">
          <button (click)="stepBack()" class="back-btn" mat-button color="primary">
            {{'Back' | translate}}
          </button>
        </div>
        <div class="col-md-6">
          <button (click)="nextStep(formFeatureInfo, false)" class="next-btn" mat-raised-button color="primary">
            {{'Next' | translate}}
          </button>
        </div>

      </div>




    </mat-card-actions>


  </mat-card>

</div>
<form [formGroup]="formServiceInfo" *ngIf="currentStep === 4" class="col-12 " >

  <mat-card>

    <mat-card-header>

      <mat-card-title>{{'Services' | translate}}</mat-card-title>

    </mat-card-header>
    <mat-divider></mat-divider>
    <mat-card-content >

      <div class="row">

        <div class="col-md-12">
          <p class="font-weight-bold">{{'Added Services' | translate}}</p>
        </div>


        <section class="services" *ngIf="services">
          <div class="col-md-12 " *ngFor="let service of services">

            <div class="row service-card">

              <div class="col-md-12 service-header">

              <span class="fw-bold service-title">
                {{service.service_name}}
              </span>
                <span class="fw-bold service-price" *ngIf="service.price">
                ${{service.price}}
              </span>

              </div>
              <div class="col-md-12 service-content service-description">
              <span [innerHTML]="service.service_description">

              </span>
              </div>
              <div class="col-md-12 service-footer">

                <button (click)="editService(service)" type="button" class="btn btn-sm btn-primary service-btn">
                  <i class="fa fa-edit"></i>
                </button>
                <button (click)="removeService(service)" type="button" class="btn btn-sm btn-danger service-btn">
                  <i class="fa fa-trash"></i>
                </button>

              </div>


            </div>

          </div>
        </section>




      </div>


      <div class="row">

        <div class="col-md-12">
          <div *ngIf="formServiceInfo.controls.service_name.touched && formServiceInfo.controls.service_name.errors">

            <mat-error *ngIf="formServiceInfo.controls.service_name.errors.required">
              {{'What is the service name ?' | translate}}
            </mat-error>
            <mat-error *ngIf="formServiceInfo.controls.service_name.errors.maxLength !== null">
              {{'Service name should not exceed 80 characters' | translate}}
            </mat-error>



          </div>
            <mat-form-field  appearance="outline">

              <mat-label>{{'Service name' | translate}}</mat-label>
              <input matInput type="text" formControlName="service_name" placeholder="{{'Service name' | translate}}" >
            </mat-form-field>

        </div>
        <div class="col-md-12">

          <mat-form-field  appearance="outline">
            <mat-label>{{'Service Price' | translate}}</mat-label>
            <input [min]="0" matInput type="number" formControlName="price" placeholder="{{'Service Price' | translate}}" >
          </mat-form-field>

        </div>
        <div class="col-md-12">

          <div *ngIf="formServiceInfo.controls.service_description.touched && formServiceInfo.controls.service_description.errors && formServiceInfo.controls.service_description.errors !== null">

            <mat-error *ngIf="formServiceInfo.controls.service_description.errors.required">
              {{'Please write about the service' | translate}}
            </mat-error>
            <mat-error *ngIf="formServiceInfo.controls.service_description.errors.minLength !== null">
              {{'Service description should contain at least 20 characters' | translate}}
            </mat-error>
            <mat-error *ngIf="formServiceInfo.controls.service_description.errors.maxLength !== null">
              {{'Service description should not exceed 2500 characters' | translate}}
            </mat-error>


          </div>



          <mat-form-field class="example-full-width" appearance="outline">
            <mat-label>{{'Service Description' | translate}}</mat-label>
            <textarea formControlName="service_description" matInput placeholder="{{'Write about the service' | translate}} ..."></textarea>
          </mat-form-field>
        </div>
        <div class="col-md-12 mt-2">

          <mat-slide-toggle formControlName="booking_enabled">{{'Enable / Disable booking' | translate}}</mat-slide-toggle>

        </div>

        <div class="col-md-12 mt-4">

          <button mat-raised-button color="primary" *ngIf="serviceEditable === null" (click)="addService()" type="button" class="float-right">
           <i class="fa fa-plus"></i>&nbsp; {{'Add this Service' | translate}}
          </button>&nbsp;
          <button mat-raised-button color="warn" *ngIf="serviceEditable !== null" (click)="closeServiceEditor()" type="button" class=" float-right">
            {{'Cancel' | translate}}
          </button>&nbsp;
          <button mat-raised-button color="accent" *ngIf="serviceEditable !== null" (click)="updateService()" type="button" class=" float-right">
           <i class="fa fa-refresh"></i>&nbsp; {{'Update Service' | translate}}
          </button>&nbsp;


        </div>


      </div>


    </mat-card-content>
    <mat-divider></mat-divider>
    <mat-card-actions class="text-center">

      <div class="row">

        <div class="col-md-6">
          <button (click)="stepBack()" class="back-btn" mat-button color="primary">
            {{'Back' | translate}}
          </button>
        </div>
        <div class="col-md-6">
          <button (click)="nextStep(formServiceInfo , false)" class="next-btn" mat-raised-button color="primary">
            {{'Next' | translate}}
          </button>
        </div>

      </div>




    </mat-card-actions>


  </mat-card>

</form>
<form [formGroup]="formPriceInfo" (submit)="nextStep(formPriceInfo)" *ngIf="currentStep === 5" class="col-12 " >

  <mat-card>

    <mat-card-header>

      <mat-card-title>{{'Detalle de Precios' | translate}}</mat-card-title>

    </mat-card-header>
    <mat-divider></mat-divider>
    <mat-card-content >

      <div class="row">

        <div class="col-md-4">

          <mat-label>{{'Price Range' | translate}}</mat-label>

          <mat-form-field class="example-full-width" appearance="outline">

            <input formControlName="price_level" name="price_level" type="text"
                   placeholder="{{'Price Range' | translate}}"
                   matInput
                   [matAutocomplete]="auto">
            <mat-autocomplete #auto="matAutocomplete">
              <mat-option *ngFor="let option of options" [value]="option">
                {{option}}
              </mat-option>
            </mat-autocomplete>
          </mat-form-field>

        </div>
        <div class="col-md-4">

          <mat-label>{{'Price From' | translate}} <span *ngIf="selectedCountry">({{selectedCountry.currency}})</span></mat-label>

          <mat-form-field  appearance="outline">

            <input  formControlName="price_from" name="price_from" type="number"
                    placeholder="{{'Price From' | translate}}"
                    matInput
            >
          </mat-form-field>


        </div>
        <div class="col-md-4">

          <mat-label>{{'Price To' | translate}} <span *ngIf="selectedCountry">({{selectedCountry.currency}})</span></mat-label>

          <mat-form-field  appearance="outline">

            <input formControlName="price_to" name="price_to" type="number"
                   placeholder="{{'Price To' | translate}}"
                   matInput
            >
          </mat-form-field>



        </div>

      </div>


    </mat-card-content>
    <mat-divider></mat-divider>
    <mat-card-actions class="text-center">

      <div class="row">

        <div class="col-md-6">
          <button (click)="stepBack()" class="back-btn" mat-button color="primary">
            {{'Back' | translate}}
          </button>
        </div>
        <div class="col-md-6">
          <button type="submit" class="next-btn" mat-raised-button color="primary">
            {{'Next' | translate}}
          </button>
        </div>

      </div>




    </mat-card-actions>


  </mat-card>

</form>
<form [formGroup]="formWorkingHourInfo" (submit)="nextStep(formWorkingHourInfo)" *ngIf="currentStep === 6" class="col-12 " >

  <mat-card>

    <mat-card-header>

      <mat-card-title>Horario de Atencion</mat-card-title>

    </mat-card-header>
    <mat-divider></mat-divider>
    <mat-card-content>

      <div class="row" *ngFor="let day of working_hours">

        <div class="col-md-3">

          <p style="line-height: 3;">{{day.day}}</p>

        </div>
        <div class="col-md-2">
          <p style="line-height: 3;">{{day.starts_at}}</p>


        </div>
        <div class="col-md-2">
          <p style="line-height: 3;">{{day.ends_at}}</p>

        </div>
        <div class="col-md-2">
          <mat-checkbox value="1" [checked]="day.open_24_h === 1 ">24 hours</mat-checkbox>

        </div>
        <div class="col-md-3 d-flex justify-content-end">

          <button type="button" (click)="editWorkingHour(day)" mat-mini-fab style="background: red;color: white" >
            <i class="fa fa-edit"></i>
          </button>
          <button type="button" (click)="removeWorkingHour(day)" mat-mini-fab style="background: red;color: white" >
            <i class="fa fa-times"></i>
          </button>

        </div>

      </div>

      <div class="row" *ngIf="workingHourEditable" >

        <div class="col-md-12">
          <select [(ngModel)]="workingHourEditable.day" class="form-control">
            <option value="">Select Day</option>
            <option [value]="day.day"  *ngFor="let day of days">
              {{day.day}}
            </option>
          </select>

        </div>
        <div class="col-md-6">
          <mat-form-field class="example-full-width" appearance="outline">

            <input [(ngModel)]="workingHourEditable.working_hour_starts_at" type="time"
                   placeholder="09:00 AM"

            >
          </mat-form-field>

        </div>
        <div class="col-md-6">
          <mat-form-field class="example-full-width" appearance="outline">

            <input [(ngModel)]="workingHourEditable.working_hour_ends_at" type="time"
                    placeholder="09:00 AM"

            >
          </mat-form-field>

        </div>
        <div class="col-md-12">

          <mat-checkbox formControlName="working_hour_open_24_h" [checked]="workingHourEditable.working_hour_open_24_h" value="1">24 Hours</mat-checkbox>

        </div>
        <div class="col-md-12">


          <button type="button" (click)="updateWorkingHour()" mat-mini-fab color="primary" >
            <i class="fa fa-plus"></i>
          </button>


        </div>

      </div>


      <div class="row" >

        <div class="col-md-12">


          <select formControlName="working_hour_day" class="form-control">
            <option value="">Select Day</option>
            <option [value]="day.day"  *ngFor="let day of days">
              {{day.day}}
            </option>
          </select>


        </div>
        <div class="col-md-6">
          <mat-form-field class="example-full-width" appearance="outline">

            <input formControlName="working_hour_starts_at" type="time"
                   placeholder="09:00 AM"
                   matInput
            >
          </mat-form-field>

        </div>
        <div class="col-md-6">
          <mat-form-field class="example-full-width" appearance="outline">

            <input  formControlName="working_hour_ends_at" type="time"
                    placeholder="09:00 AM"
                    matInput
            >
          </mat-form-field>

        </div>
        <div class="col-md-12">

          <mat-checkbox formControlName="working_hour_open_24_h" value="1">24 Hours</mat-checkbox>

        </div>
        <div class="col-md-12">


          <button type="button" (click)="addWorkingHour()" mat-mini-fab color="primary" >
            <i class="fa fa-plus"></i>
          </button>


        </div>

      </div>



    </mat-card-content>
    <mat-divider></mat-divider>
    <mat-card-actions class="text-center">

      <div class="row">

        <div class="col-md-6">
          <button (click)="stepBack()" class="back-btn" mat-button color="primary">
            Back
          </button>
        </div>
        <div class="col-md-6">
          <button  class="next-btn" mat-raised-button color="primary">
            Next
          </button>
        </div>

      </div>




    </mat-card-actions>


  </mat-card>

</form>
<form [formGroup]="formSocialMediaInfo" (submit)="nextStep(formSocialMediaInfo)" *ngIf="currentStep === 7" class="col-12 " >

  <mat-card>

    <mat-card-header>

      <mat-card-title>Redes Sociales</mat-card-title>

    </mat-card-header>
    <mat-divider></mat-divider>
    <mat-card-content>

      <div class="row" *ngFor="let social of social_media_links">

        <div class="col-md-3">

          <p style="line-height: 3;">{{social.name}}</p>

        </div>
        <div class="col-md-6">
          <p style="line-height: 3;">{{social.link}}</p>


        </div>

        <div class="col-md-3">


          <button type="button" (click)="removeSocialMedia(social)" mat-mini-fab style="background: red;color: white" >
            <i class="fa fa-times"></i>
          </button>

        </div>

      </div>

      <div class="row" >

        <div class="col-md-3">


          <select formControlName="social_media_name" class="form-control">
            <option selected value="">Select Social Media</option>
            <option value="google">
              Google
            </option>
            <option value="twitter">
              Twitter
            </option>
            <option value="instagram">
              Instagram
            </option>
            <option value="linkedin">
              Linkedin
            </option>
            <option value="facebook">
              Facebook
            </option>
            <option value="youtube">
              Youtube
            </option>
          </select>


        </div>
        <div class="col-md-6">
          <mat-form-field  appearance="outline">

            <input formControlName="social_media_link" type="text"
                   placeholder="Link"
                   matInput
            >
          </mat-form-field>

        </div>

        <div class="col-md-3">


          <button type="button" (click)="addSocialMedia()" mat-mini-fab color="primary" >
            <i class="fa fa-plus"></i>
          </button>


        </div>

      </div>



    </mat-card-content>
    <mat-divider></mat-divider>
    <mat-card-actions class="text-center">

      <div class="row">

        <div class="col-md-6">
          <button (click)="stepBack()" class="back-btn" mat-button color="primary">
            Back
          </button>
        </div>
        <div class="col-md-6">
          <button class="next-btn" mat-raised-button color="primary">
            Next
          </button>
        </div>

      </div>




    </mat-card-actions>


  </mat-card>

</form>
<div  *ngIf="currentStep === 8"  class="col-12 " >

  <mat-card>

    <mat-card-header>

      <mat-card-title>Preguntas Frecuentes</mat-card-title>

    </mat-card-header>
    <mat-divider></mat-divider>
    <mat-card-content>
      <div class="row">
        <section class="faqs mb-3">
          <div class="col-md-12 " *ngFor="let faq  of faqs">

            <div class="row service-card">

              <div class="col-md-12 service-header">

              <span class="fw-bold service-title">
                {{faq.question}}
              </span>

              </div>
              <div class="col-md-12 service-content service-description">
              <span [innerHTML]="faq.answer">

              </span>
              </div>
              <div class="col-md-12 service-footer">

                <button (click)="editFaq(faq)" type="button" class="btn btn-sm btn-primary service-btn">
                  <i class="fa fa-edit"></i>
                </button>
                <button (click)="removeFAQ(faq)" type="button" class="btn btn-sm btn-danger service-btn">
                  <i class="fa fa-trash"></i>
                </button>

              </div>


            </div>

          </div>
        </section>
      </div>

      <div class="row">
        <div class="col-md-12">
          <p class="font-weight-bold">FAQ</p>

          <form [formGroup]="formFAQ"  class="row">

            <div class="col-md-12">

              <mat-form-field class="" appearance="outline">

                <input type="text" formControlName="question"
                       placeholder="FAQ"
                       matInput
                >
              </mat-form-field>

            </div>
            <div class="col-md-12">

              <mat-form-field class=""  appearance="outline">

                    <textarea formControlName="answer"
                      placeholder="Answer"
                      matInput
                    ></textarea>
              </mat-form-field>

            </div>
            <div class="col-md-12">


              <button mat-raised-button color="primary" (click)="addFaq()" *ngIf="faqEditable === null" type="button" class="float-right">
                <i class="fa fa-plus"></i>&nbsp; Add
              </button>&nbsp;
              <button mat-raised-button color="warn" *ngIf="faqEditable !== null" (click)="closeFaqEditor()" type="button" class=" float-right">
                Cancel
              </button>&nbsp;
              <button mat-raised-button color="accent" *ngIf="faqEditable !== null" (click)="updateFAQ()" type="button" class=" float-right">
                <i class="fa fa-refresh"></i>&nbsp; Update Faq
              </button>&nbsp;


            </div>




          </form>


        </div>



      </div>




    </mat-card-content>
    <mat-divider></mat-divider>
    <mat-card-actions class="text-center">

      <div class="row">

        <div class="col-md-6">
          <button (click)="stepBack()" class="back-btn" mat-button color="primary">
            Back
          </button>
        </div>
        <div class="col-md-6">
          <button (click)="goNextTab()" class="next-btn" mat-raised-button color="primary">
            Next
          </button>
        </div>

      </div>




    </mat-card-actions>


  </mat-card>

</div>
<form  *ngIf="currentStep === 9" class="col-12 " >


  <mat-card>

    <mat-card-header>

      <mat-card-title>Images and Logo</mat-card-title>

    </mat-card-header>
    <mat-divider></mat-divider>
    <mat-card-content>

      <div class="row">

        <div class="col-md-12">
          <mat-label>Your business Video (optional)</mat-label>
          <mat-form-field class="" appearance="outline">

            <input type="text"
                   placeholder="ex:https://youtu.be/excvtyJh"
                   matInput
            >
          </mat-form-field>

        </div>




      </div>

      <div class="row" *ngIf="images.length > 0">

        <mat-label>Saved Images</mat-label>
        <div class="col-md-3 mb-4 text-center" *ngFor="let img of images">

          <div style="width: 100%;height: 100px;background: url('{{img}}');background-position: center center; background-size:cover;border-radius:10px;margin-bottom:15px;">

          </div>

          <button class="btn btn-danger btn-block btn-sm" type="button" (click)="deleteImage(img)">
            <i class="fa fa-trash"></i>
          </button>

        </div>

      </div>
      <div class="row">

        <mat-label>Upload Images</mat-label>
        <div class="col-md-12">
          <ngx-dropzone (change)="onSelect($event , 'images')">
            <ngx-dropzone-label>Drop files here or click to upload</ngx-dropzone-label>

            <ngx-dropzone-image-preview  [file]="f" *ngFor="let f of files" [removable]="true" (removed)="onRemove(f , 'images')">
              <ngx-dropzone-label>{{ f.name }} ({{ f.type }})</ngx-dropzone-label>
            </ngx-dropzone-image-preview>


          </ngx-dropzone>

        </div>



      </div>
      <div class="row" *ngIf="logo">

        <mat-label>Saved Logo</mat-label>
        <div class="col-md-4 mb-4" >

          <img src="{{logo}}" class="img-fluid"> <br/>
        </div>

      </div>
      <div class="row mt-3">

        <mat-label>Upload Business Logo</mat-label>
        <div class="col-md-12">
          <ngx-dropzone [multiple]="false"   (change)="onSelectLogo($event , 'logo')">
            <ngx-dropzone-label>Drop your logo here or click to upload</ngx-dropzone-label>
            <ngx-dropzone-image-preview  [file]="f"  *ngFor="let f of logoFiles" [removable]="true" (removed)="onRemove(f , 'logo')">
              <ngx-dropzone-label>{{ f.name }} ({{ f.type }})</ngx-dropzone-label>
            </ngx-dropzone-image-preview>
          </ngx-dropzone>

        </div>



      </div>
      <div class="row mt-3" *ngIf="fileProgress === true">

        <p class="text-primary">Images uploading on progress ...</p>
        <mat-divider></mat-divider>
        <mat-progress-bar mode="indeterminate"></mat-progress-bar>

      </div>





    </mat-card-content>
    <mat-divider></mat-divider>
    <mat-card-actions class="text-center">

      <div class="row" *ngIf="fileProgress !== true">

        <div class="col-md-6">
          <button (click)="stepBack()" class="back-btn" mat-button color="primary">
            Back
          </button>
        </div>
        <div class="col-md-6">
          <button (click)="onUpload()" class="next-btn" mat-raised-button color="primary">
            Next
          </button>
        </div>

      </div>




    </mat-card-actions>


  </mat-card>

</form>
<form [formGroup]="formContactInfo" *ngIf="currentStep === 10" class="col-12 " >


  <mat-card>

    <mat-card-header>

      <mat-card-title>Ingrese Email para Recibir Notidicaciones al ser aprobado su negocio</mat-card-title>

    </mat-card-header>
    <mat-divider></mat-divider>
    <mat-card-content>

      <div class="row">

        <div class="col-md-12">
          <mat-label>Your Contact Email</mat-label>
          <mat-form-field class="" appearance="outline">
            <mat-error>Please provide your contact email</mat-error>
            <input formControlName="contact_email" type="text"
                   placeholder=""
                   matInput
            >
          </mat-form-field>

          <!-- <mat-checkbox class="example-margin" >Already have account ?</mat-checkbox> -->

        </div>




      </div>


      <div class="row mt-3" *ngIf="saveBusinessProgress === true">

        <p class="text-primary">Saving your business listing ...</p>
        <mat-divider></mat-divider>
        <mat-progress-bar mode="indeterminate"></mat-progress-bar>

      </div>




    </mat-card-content>
    <mat-divider></mat-divider>
    <mat-card-actions class="text-center">

      <div class="row">


        <div class="col-md-6">
          <button (click)="stepBack()" class="back-btn" mat-button color="primary">
            Back
          </button>
        </div>
        <div class="col-md-6">
          <button *ngIf="saveBusinessProgress !== true" (click)="createListing()" class="next-btn" mat-raised-button color="accent">
            Submit
          </button>
        </div>

      </div>




    </mat-card-actions>


  </mat-card>

</form>

</div>